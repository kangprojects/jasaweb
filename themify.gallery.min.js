'use strict';(function(d,h,n,p){const t={origHash:null,config:{},init(a){this.config=a;this.initLightbox();this.openAnchor()},lightboxSelector(a){a.preventDefault();a.stopImmediatePropagation();if(!d(".mfp-wrap.mfp-gallery").length){var b=d(this),c=b.find("> a");c=0===c.length?b.attr("href"):c.attr("href");var f=t,e=f.getFileType(c);a=f.isVideo(c);var v=h.parseVideo(c),w={},m=b.parents(".tf_swiper-container");var q=0<m.length?"inline"===e||"iframe"===e?[]:b.data("rel")?d('a[data-rel="'+b.data("rel")+
'"]'):m.find(".tf_swiper-slide:not(.tf_swiper-slide-duplicate) .themify_lightbox img").parents(".themify_lightbox"):"inline"===e||"iframe"===e?[]:b.data("rel")?d('a[data-rel="'+b.data("rel")+'"]'):b.closest(".themify_builder_content>.module_row, .loops-wrapper, .gallery-wrapper").find(".themify_lightbox img").parents(".themify_lightbox");jQuery.uniqueSort(q);var u=0<m.length&&m[0].swiper?m[0].swiper.realIndex:1<q.length?q.index(this):0;m=a?"100%":f.getParam("width",c)?f.getParam("width",c):"94%";
var x=a?"100%":f.getParam("height",c)?f.getParam("height",c):"100%";-1===m.indexOf("%")&&(m+="px");-1===x.indexOf("%")&&(x+="px");if(!0===a&&("youtube"===v.type||"vimeo"===v.type)){const g=f.getCustomParams(c);g&&("youtube"===v.type?(w.youtube={id:"v=",index:"youtube.com/",src:"//www.youtube.com/embed/%id%"+g},c=f.getYoutubePath(c)):(w.vimeo={id:"/",index:"vimeo.com/",src:"//player.vimeo.com/video/%id%"+g},c=c.split("?")[0]))}if(1<q.length&&-1!==u){var r=[];q.each(function(g,k){g=d(k).find("img");
let l=k.dataset.t?k.dataset.t:g.prop("title");l=""!==l?l:g.prop("alt");l="undefined"!==typeof l&&""!==l?l:k.getAttribute("title");r.push({src:f.getiFrameLink(d(k).prop("href")),title:l?l:"",type:f.getFileType(d(k).prop("href"))})});r=r.reduce(function(g,k){0===g.filter(function(l){return k.src===l.src}).length&&(k.src===c&&(u=g.length),g.push(k));return g},[])}else u=0,r={src:f.getiFrameLink(c),title:"undefined"!==typeof d(this).children("img").prop("alt")?d(this).children("img").prop("alt"):d(this).prop("title")};
h.isTouch&&!p.MSStream&&/iPad|iPhone|iPod/.test(navigator.userAgent);e={items:r,type:e,image:{markup:f.getImageMarkup(this)},iframe:{markup:'<div class="mfp-iframe-scaler" style="max-width: '+m+" !important; height: "+x+';"><div role="button" tabindex="0" class="tf_close mfp-close"></div><div class="mfp-iframe-wrapper"><iframe class="mfp-iframe" noresize="noresize" frameborder="0" allowfullscreen></iframe></div>'+f.getSocialMarkup()+"</div>",patterns:w},callbacks:{beforeOpen:function(){n.body.classList.add("themify_mp_opened")},
open:function(){f.updateHash("open",this);f.openSharing(this);let g=b.data("zoom-config"),k={};g&&(g=g.split("|"),g[0]&&(k.width=g[0]),"undefined"!==typeof g[1]&&(k.height=g[1]),d(this.content).parent().css(k))},change:function(){f.updateHash("open",this)},close:function(){f.updateHash("close")},afterClose:function(){n.body.classList.remove("themify_mp_opened")}}};1<q.length&&d.extend(e,{gallery:{enabled:!0,tCounter:f.config.i18n?f.config.i18n.tCounter:""}});0<b.find("img").length&&d.extend(e,{mainClass:"mfp-with-zoom",
zoom:{enabled:!h.isTouch,duration:300,easing:"ease-in-out",opener:function(){return b.find("img")}}});e.mainClass=e.mainClass?e.mainClass:"";e.mainClass+=a?" video-frame":" standard-frame";e.fixedContentPos=!0;f.isInIframe()?p.parent.jQuery.magnificPopup.open(e):d.magnificPopup.open(e,u)}},gallerySelector(a){const b=t;if("image"===b.getFileType(d(this).prop("href"))){var c=d(b.config.gallerySelector,d(this).closest(".module, .gallery, .gallery-wrapper").not(".module-gallery"));if(c.length){a.preventDefault();
a.stopImmediatePropagation();var f=[];c.each(function(){var e=d(this).prop("title");e=""!==e?e:"undefined"!==typeof d(this).children("img").prop("alt")?d(this).children("img").prop("alt"):"";0<d(this).parent().next(".gallery-caption").length?e=d(this).parent().next(".wp-caption-text").html():0<d(this).find(".gallery-caption").find(".entry-content").length&&(e=d(this).find(".gallery-caption").find(".entry-content").text());f.push({src:d(this).prop("href"),title:e,type:"image"})});a={gallery:{enabled:!0},
image:{markup:b.getImageMarkup(this)},items:f,mainClass:"mfp-with-zoom",zoom:{enabled:!h.isTouch,duration:300,easing:"ease-in-out",opener:function(e){e=d(c[e.index]);return e.is("img")?e:e.find("img")}},callbacks:{open:function(){b.updateHash("open",this);b.openSharing(this)},change:function(){b.updateHash("open",this)},close:function(){b.updateHash("close")}}};b.isInIframe()?p.parent.jQuery.magnificPopup.open(a,c.index(this)):d.magnificPopup.open(a,c.index(this))}}},contentImagesAreas(a){const b=
t;if("image"===b.getFileType(this.getAttribute("href"))&&d(this).closest(b.config.contentImagesAreas)){a.preventDefault();a.stopImmediatePropagation();const c=d(this);a={items:{src:c.prop("href"),title:0<c.next(".wp-caption-text").length?c.next(".wp-caption-text").html():c.children("img").prop("alt")},image:{markup:b.getImageMarkup(this)},type:"image",callbacks:{open:function(){b.updateHash("open",this);b.openSharing(this)},change:function(){b.updateHash("open",this)},close:function(){b.updateHash("close")}}};
0<c.find("img").length&&d.extend(a,{mainClass:"mfp-with-zoom",zoom:{enabled:!h.isTouch,duration:300,easing:"ease-in-out",opener:function(){return c.find("img")}}});b.isInIframe()?p.parent.jQuery.magnificPopup.open(a):d.magnificPopup.open(a)}},initLightbox(){h.body.off("click",this.config.lightboxSelector,this.lightboxSelector).on("click",this.config.lightboxSelector,this.lightboxSelector);if(this.config.gallerySelector)h.body.off("click",this.config.gallerySelector,this.gallerySelector).on("click",
this.config.gallerySelector,this.gallerySelector);if(this.config.contentImagesAreas)h.body.off("click",".post-content a",this.contentImagesAreas).on("click",".post-content a",this.contentImagesAreas)},isInIframe(){return this.config.extraLightboxArgs&&this.config.extraLightboxArgs.displayIframeContentsInParent},getFileType(a){let b;try{b=new URL(a)}catch(c){b=a}return(b&&"object"===typeof b?a.replace(b.search,""):a).match(/\.(gif|jpg|jpeg|tiff|png|webp|apng)$/i)?"image":a.match(/\bajax=true\b/i)?
"ajax":"#"===a.substr(0,1)?"inline":"iframe"},isVideo(a){return this.isYoutube(a)||this.isVimeo(a)||a.match(/\b.mov\b/i)||a.match(/\b.swf\b/i)},isYoutube(a){return"youtube"===h.parseVideo(a).type},isVimeo(a){return"vimeo"===h.parseVideo(a).type},getYoutubePath(a){return"//youtube.com/watch?v="+(a.match(/youtu\.be/i)?a.match(/youtu\.be\/([^\?]*)/i)[1]:this.getParam("v",a))},getiFrameLink(a){"iframe"===this.getFileType(a)&&null===this.isVideo(a)&&(h.parseVideo(a),a=h.UpdateQueryString("iframe","true",
a));return a},getParam(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(b);return null==a?"":a[1]},getCustomParams(a){a=(a=a.split("?")[1])?"&"+a.replace(/[\\?&]?(v|autoplay)=[^&#]*/g,"").replace(/^&/g,""):"";return"?autoplay=1"+a},openSharing(a){if(!this.config.disableSharing){var b=a.content[0].getElementsByClassName("tf_social_sharing")[0];b&&b.addEventListener("click",function(c){c.preventDefault();h.sharer(c.target.dataset.type,a.currItem.data.src.replace("?iframe=true",
""),a.currItem.data.title)})}},updateHash(a,b){"open"===a?(null===this.origHash&&(this.origHash=p.location.hash),a=b.currItem.data.title,b=n.createElement("div"),b.innerHTML=a,a=b.textContent.trim(),""!==a&&this._updateHash(a)):(this._updateHash(this.origHash),this.origHash=null)},_updateHash(a){"#"!==(""+a).charAt(0)&&(a="#"+a);history.replaceState("","",a)},openAnchor(){if(""!==p.location.hash){let a=decodeURI(p.location.hash.substring(1)),b=n.querySelector('[alt="'+a+'"]');b=null===b?n.querySelector('[title="'+
a+'"]'):b;null!==b&&b.click()}},getIcon(a){a="tf-"+a.trim().replace(" ","-");const b=n.createElementNS("http://www.w3.org/2000/svg","use"),c=n.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("class","tf_fa "+a);b.setAttributeNS(null,"href","#"+a);c.appendChild(b);return c},getSocialMarkup(){if(this.config.disableSharing)return"";h.fontAwesome(["ti-facebook","ti-twitter-alt","ti-pinterest","ti-email"]);return'<div class="tf_social_sharing"><a href="#" data-type="facebook">'+this.getIcon("ti-facebook").outerHTML+
'</a><a href="#" data-type="twitter">'+this.getIcon("ti-twitter-alt").outerHTML+'</a><a href="#" data-type="pinterest">'+this.getIcon("ti-pinterest").outerHTML+'</a><a href="#" data-type="email">'+this.getIcon("ti-email").outerHTML+"</a></div>"},getImageMarkup(a){return'<div class="mfp-figure"><div role="button" tabindex="0" class="tf_close mfp-close"></div><div class="mfp-counter"></div><div class="mfp-img"></div><div class="mfp-bottom-bar">'+("no"!==a.dataset.title?'<div class="mfp-title"></div>':
"")+this.getSocialMarkup()+"</div></div>"}};h.on("tf_gallery_init",function(a){t.init(a)})})(jQuery,Themify,document,window);
